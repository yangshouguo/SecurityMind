diff --git a/content/base/src/nsFrameLoader.cpp b/content/base/src/nsFrameLoader.cpp
--- a/content/base/src/nsFrameLoader.cpp
+++ b/content/base/src/nsFrameLoader.cpp
@@ -814,16 +814,17 @@ nsFrameLoader::Show(int32_t marginWidth,
   NS_ASSERTION(baseWindow, "Found a nsIDocShell that isn't a nsIBaseWindow.");
   baseWindow->InitWindow(nullptr, view->GetWidget(), 0, 0,
                          size.width, size.height);
   // This is kinda whacky, this "Create()" call doesn't really
   // create anything, one starts to wonder why this was named
   // "Create"...
   baseWindow->Create();
   baseWindow->SetVisibility(true);
+  NS_ENSURE_TRUE(mDocShell, false);
 
   // Trigger editor re-initialization if midas is turned on in the
   // sub-document. This shouldn't be necessary, but given the way our
   // editor works, it is. See
   // https://bugzilla.mozilla.org/show_bug.cgi?id=284245
   nsCOMPtr<nsIPresShell> presShell = mDocShell->GetPresShell();
   if (presShell) {
     nsCOMPtr<nsIDOMHTMLDocument> doc =
diff --git a/docshell/base/nsDocShell.cpp b/docshell/base/nsDocShell.cpp
--- a/docshell/base/nsDocShell.cpp
+++ b/docshell/base/nsDocShell.cpp
@@ -5470,23 +5470,24 @@ nsDocShell::GetAllowMixedContentAndConne
   }
 
   return NS_OK;
 }
 
 NS_IMETHODIMP
 nsDocShell::SetVisibility(bool aVisibility)
 {
-    if (!mContentViewer)
+    nsCOMPtr<nsIContentViewer> cv = mContentViewer;
+    if (!cv)
         return NS_OK;
     if (aVisibility) {
-        mContentViewer->Show();
+        cv->Show();
     }
     else {
-        mContentViewer->Hide();
+        cv->Hide();
     }
     
     return NS_OK;
 }
 
 NS_IMETHODIMP
 nsDocShell::GetEnabled(bool *aEnabled)
 {
