diff -up mozilla/js/src/jsregexp.c.473709 mozilla/js/src/jsregexp.c
--- mozilla/js/src/jsregexp.c.473709	2007-04-27 05:18:06.000000000 +0200
+++ mozilla/js/src/jsregexp.c	2009-02-18 11:03:59.000000000 +0100
@@ -4129,10 +4129,12 @@ js_NewRegExpObject(JSContext *cx, JSToke
     str = js_NewStringCopyN(cx, chars, length, 0);
     if (!str)
         return NULL;
+    JS_PUSH_SINGLE_TEMP_ROOT(cx, STRING_TO_JSVAL(str), &tvr);
     re = js_NewRegExp(cx, ts,  str, flags, JS_FALSE);
-    if (!re)
+    if (!re) {
+        JS_POP_TEMP_ROOT(cx, &tvr);
         return NULL;
-    JS_PUSH_SINGLE_TEMP_ROOT(cx, STRING_TO_JSVAL(str), &tvr);
+    }
     obj = js_NewObject(cx, &js_RegExpClass, NULL, NULL);
     if (!obj || !JS_SetPrivate(cx, obj, re) || !js_SetLastIndex(cx, obj, 0)) {
         js_DestroyRegExp(cx, re);
