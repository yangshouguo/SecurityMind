diff -r 82daaccfd2b9 layout/xul/base/src/tree/src/nsTreeContentView.cpp
--- a/layout/xul/base/src/tree/src/nsTreeContentView.cpp	Wed Jan 06 16:08:37 2010 -0600
+++ b/layout/xul/base/src/tree/src/nsTreeContentView.cpp	Thu Jan 07 20:35:28 2010 +0000
@@ -1149,19 +1149,23 @@ void
 nsTreeContentView::Serialize(nsIContent* aContent, PRInt32 aParentIndex,
                              PRInt32* aIndex, nsTArray<Row*>& aRows)
 {
+  PRBool isXUL = aContent->IsXUL();
+  if (!isXUL && !aContent->IsHTML())
+    return;
+
   ChildIterator iter, last;
   for (ChildIterator::Init(aContent, &iter, &last); iter != last; ++iter) {
     nsIContent* content = *iter;
     nsIAtom *tag = content->Tag();
     PRInt32 count = aRows.Length();
 
-    if (content->IsXUL()) {
+    if (isXUL && content->IsXUL()) {
       if (tag == nsGkAtoms::treeitem)
         SerializeItem(content, aParentIndex, aIndex, aRows);
       else if (tag == nsGkAtoms::treeseparator)
         SerializeSeparator(content, aParentIndex, aIndex, aRows);
     }
-    else if (content->IsHTML()) {
+    else if (!isXUL && content->IsHTML()) {
       if (tag == nsGkAtoms::option)
         SerializeOption(content, aParentIndex, aIndex, aRows);
       else if (tag == nsGkAtoms::optgroup)
